# #!/bin/bash
# set -e

# # 初始化数据库目录（第一次运行时执行）
# if [ ! -d /var/lib/mysql/mysql ]; then
#     echo "Initializing MariaDB system tables..."
#     mariadb-install-db --user=mysql --basedir=/usr --datadir=/var/lib/mysql
# fi

# # 临时启动 MariaDB（后台）
# echo "Starting temporary MariaDB..."
# mysqld --skip-networking --datadir=/var/lib/mysql &

# # 等待 MariaDB 完全启动
# echo "Waiting for MariaDB to be ready..."
# until mysqladmin ping --silent; do
#     sleep 1
# done

# echo "MariaDB is ready"

# # 执行初始化 SQL
# for f in /docker-entrypoint-initdb.d/*.sql; do
#     echo "Executing $f..."
#     mysql -u root < "$f"
# done

# # 停掉临时 mysqld
# mysqladmin shutdown

# # 前台启动真正的 MariaDB
# echo "Initialization complete. Starting MariaDB in foreground..."
# exec mysqld --console


